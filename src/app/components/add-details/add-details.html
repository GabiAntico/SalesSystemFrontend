<div class="max-w-lg mx-auto mt-10 p-6 bg-gray-500/10 rounded-lg shadow-md text-white">
  <form name="add-detail">
    <div class="items-center mb-4 grid grid-cols-[auto_250px_auto] gap-2">
      <label for="product" class="text-right self-center">Product</label>
      <select (change)="calculateSubtotal()" [(ngModel)]="selectedProduct" id="product" name="product" class="w-[250px]l border border-gray-300 rounded-md px-4 py-2 bg-[#121414] focus:outline-none focus:ring-2 focus:ring-purple-500 text-white">
          @for (product of products; track $index) {
              <option [ngValue]="product">{{product.description}}</option>
          }
      </select>
    </div>
    <div class="items-center mb-4 grid grid-cols-[auto_250px_auto] gap-2">
      <label for="cuantity" class="text-right self-center">Quantity</label>
      <input (input)="calculateSubtotal()" [(ngModel)]="quantity" id="cuantity" name="cuantity" type="number" placeholder="Enter the quantity" class="w-[250px]l border border-gray-300 rounded-md px-4 py-2 bg-[#121414] focus:outline-none focus:ring-2 focus:ring-purple-500">
    </div>
    <div class="justify-center flex mb-4">
      <strong>Subtotal:
        @if(selectedProduct && subTotal >= 0){
          {{subTotal | currency:'ARS' }}
        } @else {
          {{0 | currency:'ARS'}}
        }
      </strong>
    </div>
    <div class="mb-4">
      <button (click)="addDetail()" type="button" class="bg-green-700 rounded-lg px-4 py-2 w-full hover:bg-green-900 hover:cursor-pointer transition duration-200">Add</button>
    </div>
  </form>
  <div class="flex justify-center mt-8">
    <table class="table-auto border-collapse border-4 border-[#a78bfa] shadow-lg text-left">
      <thead class="bg-purple-950">
      <tr>
        <th class="border-4 border-[#a78bfa] px-4 py-2">Product</th>
        <th class="border-4 border-[#a78bfa] px-4 py-2">Price</th>
        <th class="border-4 border-[#a78bfa] px-4 py-2">Quantity</th>
        <th class="border-4 border-[#a78bfa] px-4 py-2">Subtotal</th>
      </tr>
      </thead>
      <tbody>
          @for (detail of details; track $index){
              <tr>
                  <td class="border-4 border-[#a78bfa] px-4 py-2">{{productsNamesToRenderTable[$index]}}</td>
                  <td class="border-4 border-[#a78bfa] px-4 py-2">{{detail.price | currency:'ARS' }}</td>
                  <td class="border-4 border-[#a78bfa] px-4 py-2">{{detail.cuantity}}</td>
                  <td class="border-4 border-[#a78bfa] px-4 py-2">{{detail.subtotal | currency:'ARS' }}</td>
              </tr>
          }
      </tbody>
    </table>
  </div>
</div>
<div class="fixed bottom-20 right-20 z-50 text-white">
    <button (click)="cancelDetails()" type="button" class="px-4 py-2 bg-red-700 rounded-lg hover:bg-red-900 hover:cursor-pointer transition duration-200 mr-3">Cancel</button>
    <button (click)="submitProducts()" type="button" class="px-4 py-2 bg-purple-600 rounded-lg hover:bg-purple-900 hover:cursor-pointer transition duration-200">Finish</button>
</div>
